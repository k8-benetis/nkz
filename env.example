# =============================================================================
# Nekazari Agricultural Platform - Enterprise Environment Configuration
# =============================================================================
# IMPORTANT: Copy this file to .env and set ALL required values before deployment
# NEVER commit .env file to version control - it contains sensitive information

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
# Environment: development, staging, production
ENVIRONMENT=development

# Production domain (replace with your actual domain)
# All public URLs (frontend, keycloak, grafana, etc.) are automatically constructed from this
PRODUCTION_DOMAIN=nekazari.robotika.cloud

# =============================================================================
# REQUIRED SECURITY CONFIGURATION - MUST BE SET
# =============================================================================
# Generate a strong JWT secret (minimum 32 characters)
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Keycloak admin password (use strong password)
KEYCLOAK_ADMIN_PASSWORD=your-strong-keycloak-admin-password
KEYCLOAK_ADMIN_USERNAME=admin

# Database passwords (use strong passwords)
POSTGRES_PASSWORD=your-strong-postgresql-password
TIMESCALE_PASSWORD=your-strong-timescale-password
MONGODB_ROOT_PASSWORD=your-mongodb-root-password

# Bootstrap admin user (first admin user created on platform deployment)
# This user will have PlatformAdmin role and full access
# IMPORTANT: These values should be set in bootstrap-secret, not here
# This is only for reference - actual values go in Kubernetes Secret
BOOTSTRAP_ADMIN_EMAIL=admin@nekazari.local
BOOTSTRAP_ADMIN_PASSWORD=your-strong-bootstrap-password-123!
BOOTSTRAP_TENANT_ID=bootstrap

# Vercel Blob Storage (for entity icons and 3D models)
# Get this token from Vercel Dashboard > Settings > Environment Variables
# Or from: vercel env pull
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================================================
# REQUIRED SERVICE CONFIGURATION - MUST BE SET
# =============================================================================
# Orion-LD Context Broker URL (internal service - use http)
# En Kubernetes: http://orion-ld-service:1026
# Localmente (port-forward): http://localhost:1026
# Externo (si est√° expuesto): https://nekazari.robotika.cloud/orion
ORION_URL=http://orion-ld-service:1026

# QuantumLeap URL (OBSOLETO - NO SE USA)
# QuantumLeap y CrateDB fueron eliminados - Todos los servicios usan TimescaleDB directamente
# QUANTUMLEAP_URL=http://quantumleap-service:8668
# QUANTUMLEAP_NOTIFY_URL=http://quantumleap-service.nekazari.svc.cluster.local:8668/v2/notify

# Keycloak URL (internal service - use http for internal, https for external)
KEYCLOAK_URL=http://keycloak-service:8080
KEYCLOAK_REALM=nekazari
KEYCLOAK_CLIENT_ID=nekazari-api-gateway
KEYCLOAK_CLIENT_SECRET=backend-secret-change-in-production

# Keycloak Public URL (external access URL for Keycloak)
# This is the URL users see in their browser
KEYCLOAK_PUBLIC_URL=https://${PRODUCTION_DOMAIN:-nekazari.robotika.cloud}/auth

# Keycloak Hostname (hostname only, without protocol)
# This is used to accept tokens from any Keycloak hostname configured
# Example: auth.robotika.cloud (if Keycloak is on a subdomain)
KEYCLOAK_HOSTNAME=auth.robotika.cloud

# External Context URL (use https for external access)
CONTEXT_URL=https://${PRODUCTION_DOMAIN:-nekazari.robotika.cloud}/ngsi-ld-context.json

# MongoDB connection string (internal service)
MONGODB_URL=mongodb://mongodb-service:27017/orion

# PostgreSQL connection strings - Each service has its own database (internal services)
POSTGRES_URL=postgresql://timescale:${POSTGRES_PASSWORD}@postgresql-service:5432/fiware_history
API_VALIDATOR_POSTGRES_URL=postgresql://timescale:${POSTGRES_PASSWORD}@postgresql-service:5432/api_validator_db
# FARMER_AUTH_POSTGRES_URL - DEPRECATED: Replaced by Keycloak
ACTIVATION_CODES_POSTGRES_URL=postgresql://timescale:${POSTGRES_PASSWORD}@postgresql-service:5432/activation_codes_db
KEYCLOAK_POSTGRES_URL=jdbc:postgresql://postgresql-service:5432/keycloak

# =============================================================================
# ADMIN CONFIGURATION - OBSOLETO (AHORA USAMOS KEYCLOAK)
# =============================================================================
# Estos campos ya no se usan - el sistema de admin ahora es Keycloak
# ADMIN_PASSWORD_HASH=
# ADMIN_EMAILS=
# ADMIN_EMAIL=nekazari@robotika.cloud

# WooCommerce webhook secret (set in your WooCommerce webhook settings)
WOOCOMMERCE_WEBHOOK_SECRET=your_woocommerce_webhook_secret_here

# =============================================================================
# CESIUM ION CONFIGURATION (Optional)
# =============================================================================
# Get your free token at: https://cesium.com/ion/
CESIUM_ION_TOKEN=your_cesium_ion_token_here

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
# API Gateway
API_GATEWAY_PORT=8080
API_GATEWAY_HOST=0.0.0.0

# Entity Manager
ENTITY_MANAGER_PORT=5000
ENTITY_MANAGER_HOST=0.0.0.0

# SDM Integration
SDM_INTEGRATION_PORT=5001
SDM_INTEGRATION_HOST=0.0.0.0

# Farmer Auth API - DEPRECATED: Replaced by Keycloak

# I18N Service
# I18N Service - REMOVED
# I18N is now handled entirely in the frontend via I18nContext
# Translations are loaded from /locales/*.json files in the frontend

# LIDAR Processor
LIDAR_PROCESSOR_PORT=5004
LIDAR_PROCESSOR_HOST=0.0.0.0

# =============================================================================
# ROS2 CONFIGURATION
# =============================================================================
ROS_DOMAIN_ID=10
RMW_IMPLEMENTATION=rmw_fastrtps_cpp
SIMULATION_SPEED=1.0

# =============================================================================
# MQTT CONFIGURATION (internal service)
# =============================================================================
MQTT_HOST=mosquitto-service
MQTT_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=

# =============================================================================
# LIDAR PROCESSING CONFIGURATION
# =============================================================================
CESIUM_ION_TOKEN=your_cesium_ion_token_here

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_HOST=0.0.0.0

# Grafana
GRAFANA_PORT=3000
GRAFANA_HOST=0.0.0.0
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_password_here

# =============================================================================
# NGINX CONFIGURATION
# =============================================================================
NGINX_PORT=80
NGINX_SSL_PORT=443
NGINX_HOST=0.0.0.0

# =============================================================================
# SSL CONFIGURATION
# =============================================================================
# SSL Certificate paths (for production)
SSL_CERT_PATH=/etc/ssl/certs/nekazari.crt
SSL_KEY_PATH=/etc/ssl/private/nekazari.key
SSL_CA_PATH=/etc/ssl/certs/ca.crt

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
# Set to 'development' for dev mode, 'production' for production
ENVIRONMENT=development
DEBUG=true

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_LOCATION=/app/backups

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_LIDAR_PROCESSING=true
ENABLE_ROS2_INTEGRATION=true
ENABLE_MONITORING=true
ENABLE_BACKUP=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Weather API (optional)
WEATHER_API_KEY=your_weather_api_key_here
WEATHER_API_URL=https://api.openweathermap.org/data/2.5

# Maps API (optional)
MAPS_API_KEY=your_maps_api_key_here

# =============================================================================
# COPERNICUS CDSE CONFIGURATION (Required for NDVI Service)
# =============================================================================
# Copernicus Data Space Ecosystem (CDSE) - Free Sentinel-2 data access
# Register at: https://dataspace.copernicus.eu/
# These credentials are used by the NDVI worker to download Sentinel-2 imagery
# COPERNICUS_CDSE_URL=https://dataspace.copernicus.eu
# COPERNICUS_CDSE_USERNAME=your_copernicus_username
# COPERNICUS_CDSE_PASSWORD=your_copernicus_password

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Connection pools
DB_POOL_SIZE=10
DB_POOL_OVERFLOW=20
DB_POOL_TIMEOUT=30

# Cache configuration (internal service)
REDIS_URL=redis://redis-service:6379/0
CACHE_TTL=3600

# =============================================================================
# EMAIL SERVICE CONFIGURATION
# =============================================================================
# SMTP Configuration (configure with your email provider)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_TLS=true

# Email Service Configuration
SMTP_FROM_EMAIL=nekazari@robotika.cloud
SMTP_FROM_NAME="Nekazari Platform"
EMAIL_SERVICE_URL=http://email-service:5000

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================
# SMS notifications (optional)
SMS_API_KEY=your_sms_api_key_here
SMS_API_URL=https://api.twilio.com/2010-04-01

# =============================================================================
# ANALYTICS CONFIGURATION
# =============================================================================
# Google Analytics (optional)
GA_TRACKING_ID=GA-XXXXXXXXX

# =============================================================================
# CUSTOM CONFIGURATION
# =============================================================================
# Add your custom environment variables here
CUSTOM_FEATURE_ENABLED=false
CUSTOM_API_URL=
CUSTOM_API_KEY=
